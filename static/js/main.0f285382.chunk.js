(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){e.exports={sliderContainer:"styles_sliderContainer__2xz7H"}},107:function(e,t,n){e.exports={value:"styles_value__3-ofr"}},108:function(e,t,n){e.exports={control:"styles_control__3XxX2"}},110:function(e,t,n){e.exports={colorPickerContainer:"styles_colorPickerContainer__2B8Y2"}},113:function(e,t,n){e.exports={thumb:"styles_thumb__1PYEZ"}},114:function(e,t,n){e.exports={loading:"styles_loading__1cFvQ",chart:"styles_chart__2VlIB",widgetLabelContainer:"styles_widgetLabelContainer__ut_ua",widgetLabel:"styles_widgetLabel__3C3ca"}},115:function(e,t,n){e.exports={loading:"styles_loading__2yRSd",chart:"styles_chart__2Ufze",widgetLabelContainer:"styles_widgetLabelContainer__37M62",widgetLabel:"styles_widgetLabel__2KUi5"}},122:function(e,t,n){e.exports=n(226)},222:function(e,t,n){},226:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),o=n.n(i),c=n(239),s=n(30),l=n(98),u=n(13),d="app/settings/UPDATE_SETTINGS",p=u.c({});var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case d:var n=t.settings;return e.merge(n);default:return e}},g="app/blynk/SET_CONNECTION_PARAMS",v="app/blynk/SET_PROJECT",m="app/blynk/SET_PIN_VALUE",b="app/blynk/SET_PIN_HISTORY",f="app/blynk/LOGOUT",y="app/blynk/SET_ACTIVE_TAB_ID",_=(localStorage.getItem("blynk-web-client:tokens")||"").split(","),O=localStorage.getItem("blynk-web-client:serverHost")||"blynk-cloud.com",w=Number(localStorage.getItem("blynk-web-client:serverPort"))||8080,j=localStorage.getItem("blynk-web-client:connectionMode")||"no-ssl",k=u.c({tokens:_,serverHost:O,serverPort:w,connectionMode:j,activeTabId:0,project:null,devices:{}});var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case g:var n=t.tokens,a=t.serverHost,r=t.serverPort,i=t.connectionMode;return e.set("tokens",n).set("serverHost",a).set("serverPort",r).set("connectionMode",i);case f:return e.set("tokens",new u.a).set("activeTabId",0).set("project",null).set("pins",new u.b).set("pinsHistory",new u.b).set("pinsWriteHistory",new u.b).set("devices",new u.b);case y:var o=t.tabId;return e.set("activeTabId",o);case v:var c=t.project,s=t.devices;return e.set("project",c).set("devices",s);case m:var l=t.deviceId,d=t.pin,p=t.value,h=e.getIn(["devices",l]),_=(h=h.setIn(["pins",d],p)).getIn(["pinsWriteHistory",d],new u.a);return _=_.push(p),h=h.setIn(["pinsWriteHistory",d],_),e.setIn(["devices",l],h);case b:var O=t.deviceId,w=t.pin,j=t.history,E=e.getIn(["devices",O]);return E=E.setIn(["pinsHistory",w],j),e.setIn(["devices",O],E);default:return e}},I=Object(s.c)({settings:h,blynk:E}),C=function(){var e=[l.a],t=s.d.apply(void 0,[s.a.apply(void 0,e)].concat([]));return Object(s.e)(I,{},t)},x=n(3),S=n(6),M=n(5),T=n(2),N=n(4),L=n(9),A=n(235),P=n(236),R=n(237),D=n(16),H=n.n(D),B=n(19),W=n(63),F=n(52),V=n(57),U=n(10),Y=n(229),G=n(230),X=n(231),z=n(232),K=n(238),J=n(22),q=n(100),Z=n.n(q),Q=n(64),$=n.n(Q),ee=n(101),te=n.n(ee),ne=n(23);function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=new u.b;return e.forEach(function(e){n=n.set(e.get(t),e)}),n}var re=n(42),ie=n(35),oe=n(116),ce=n(62),se=n(102),le=n.n(se),ue={RESPONSE:0,LOGIN:2,PING:6,TWEET:12,EMAIL:13,NOTIFY:14,BRIDGE:15,HW_SYNC:16,HW_INFO:17,HARDWARE:20};var de=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).isRunning=!1,n.socket=null,n.pingTimer=null,n.token=null,n.debugging=!1,n.handleWSMessage=function(e){if(e.data instanceof ArrayBuffer){var t=e.data;switch(new DataView(t).getInt8(0)){case ue.RESPONSE:n.debugging&&console.info(n.messageToDebugString(t));break;case ue.HARDWARE:n.handleHardwareMessage((a=t.slice(5),String.fromCharCode.apply(null,new Uint8Array(a))))}}else console.warn("WS: Unexpected type : ".concat(e.data));var a},n._throttleSendFunctions={},n.throttleSend=function(e){return n._throttleSendFunctions[e]=n._throttleSendFunctions[e]||le()(n.send.bind(Object(ie.a)(Object(ie.a)(n))),100),n._throttleSendFunctions[e]},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"init",value:function(e){var t=this,n=e.token,a=e.serverHost,r=e.serverPort,i=e.connectionMode;this.stop(),this.token=n,this.socket=new WebSocket("".concat("no-ssl"===i?"ws":"wss","://").concat(a,":").concat(r,"/websockets")),this.socket.binaryType="arraybuffer",this.socket.onmessage=this.handleWSMessage,this.socket.onopen=function(e){t.start(),t.debugging&&console.info("WS: Connected")},this.socket.onclose=function(e){t.stop(),t.debugging&&console.info("WS: Disconnected")},this.socket.onerror=function(e){console.warn("WS: Error")}}},{key:"start",value:function(){var e=this;this.isRunning||(this.isRunning=!0,this.send("login ".concat(this.token)),this.send("bridge 9999 i ".concat(this.token)),this.pingTimer=Object(ce.a)({action:function(){e.send("ping")},delay:2e3,firstTimeDelay:2e3,skipFirst:!0}),this.pingTimer.start())}},{key:"stop",value:function(){this.isRunning&&(this.isRunning=!1,this.pingTimer.stop(),this.socket.close())}},{key:"messageToDebugString",value:function(e){var t=new DataView(e),n=function(e){switch(e){case 0:return"RESPONSE";case 20:return"HARDWARE"}}(t.getInt8(0)),a=t.getUint16(1),r=function(e){switch(e){case 200:return"OK";case 2:return"ILLEGAL_COMMAND";case 8:return"NO_ACTIVE_DASHBOARD";case 9:return"INVALID_TOKEN";case 11:return"ILLEGAL_COMMAND_BODY"}}(t.getUint16(3));return"Command : ".concat(n,", msgId : ").concat(a,", responseCode : ").concat(r)}},{key:"dispatchWritePin",value:function(e,t){this.dispatchEvent(new CustomEvent("write-pin",{detail:{pin:"".concat(e),value:t}}))}},{key:"sendWritePin",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e[0],r=e.slice(1);n||this.throttleSend(e)("bridge 9999 ".concat(a,"w ").concat(r," ").concat(t)),this.dispatchWritePin(e,t)}},{key:"handleHardwareMessage",value:function(e){var t=e.split(String.fromCharCode(0)),n=Object(re.a)(t,3),a=n[0],r=n[1],i=n[2];switch(a){case"vw":this.dispatchWritePin("v".concat(r),i);break;case"aw":this.dispatchWritePin("a".concat(r),i);break;case"dw":this.dispatchWritePin("d".concat(r),i)}}},{key:"send",value:function(e){if(this.isRunning&&this.socket.readyState===WebSocket.OPEN){var t=e.split(" "),n=this.createMessage(t);this.debugging&&console.info("WS sending : ".concat(e)),this.socket.send(n)}}},{key:"createMessage",value:function(e){var t=e[0],n=e.length>1?e.slice(1).join("\0"):null,a=function(e){switch(e){case"ping":return ue.PING;case"login":return ue.LOGIN;case"hardware":return ue.HARDWARE;case"bridge":return ue.BRIDGE}}(t);return this.buildBlynkMessage(a,1,n)}},{key:"buildBlynkMessage",value:function(e,t,n){var a=n?n.length:0,r=new ArrayBuffer(5+a),i=new DataView(r);if(i.setInt8(0,e),i.setInt16(1,t),i.setInt16(3,a),a>0)for(var o=0,c=5;o<n.length;o+=1,c+=1)i.setInt8(c,n.charCodeAt(o));return new Uint8Array(r)}}]),t}(Object(oe.a)(EventTarget)),pe=(new function e(){var t=this;Object(x.a)(this,e),this._clients={},this.getBlynkWSClient=function(e){return t._clients[String(e)]||(t._clients[String(e)]=new de),t._clients[String(e)]}}).getBlynkWSClient;function he(e){var t=e.token,n=e.serverHost,a=e.serverPort,r=e.connectionMode;return"".concat("no-ssl"===r?"http":"https","://").concat(n,":").concat(a,"/").concat(t)}var ge=n(74),ve=n.n(ge),me=n(103),be=n.n(me);function fe(e){return-1===e.get("pin")?-1:e.get("pinType")[0].toLowerCase()+e.get("pin")}function ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pin";return t?t.replace(new RegExp("/".concat(be()(n),"([.]?([#]*))/")),function(t,n,a){var r,i;return r=n?parseFloat(Number(e).toFixed(a.length)):e,i=String(r),'<span class="pinValue">'.concat(ve()(i),"</span>")}):'<span class="pinValue">'.concat(ve()(e),"</span>")}function _e(e){var t=e.deviceId,n=e.pin,a=e.value;return{type:m,deviceId:t,pin:n,value:a}}var Oe=n(38),we=n.n(Oe),je=function(e){return e?void 0:"Field cannot be empty"},ke=n(75),Ee=n.n(ke),Ie=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:Ee.a.main},r.a.createElement("a",{href:"https://github.com/avin/blynk-web-client",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("svg",{className:Ee.a.octicon,viewBox:"0 0 16 16",version:"1.1","aria-hidden":"true"},r.a.createElement("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"}))))}}]),t}(r.a.Component),Ce=function(e){return e.error&&e.touched?r.a.createElement("div",{className:we.a.error},e.error):null},xe=function(e){var t=e.input,n=e.meta,a=Object(F.a)(e,["input","meta"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,Object(W.a)({},t,a)),r.a.createElement(Ce,n))},Se=function(e){var t=e.input,n=e.meta,a=Object(F.a)(e,["input","meta"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,Object(W.a)({},t,a)),r.a.createElement(Ce,n))},Me=function(e){var t=e.input,n=(e.meta,Object(F.a)(e,["input","meta"]));return r.a.createElement(X.a,Object(W.a)({},t,n))},Te=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={busy:!1,connectionError:null},n.handleSubmit=function(){var e=Object(B.a)(H.a.mark(function e(t){var a,r,i,o,c,s;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.setConnectionParams,i=a.history,o=a.testConnection,c=t.tokens.split(/[\r]?\n/).map(function(e){return Z()(e)}).filter(function(e){return e}),r({tokens:u.c(c),serverHost:t.serverHost,serverPort:t.serverPort,connectionMode:t.connectionMode}),n.setState({busy:!0}),e.prev=4,e.next=7,o();case 7:i.push("project"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(4),s=e.t0.response?e.t0.response.text:e.t0.message,n.setState({busy:!1,connectionError:s});case 14:case"end":return e.stop()}},e,this,[[4,10]])}));return function(t){return e.apply(this,arguments)}}(),n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.state,t=e.busy,n=e.connectionError,a=this.props,i=a.tokens,o=a.serverHost,c=a.serverPort,s=a.connectionMode;return r.a.createElement("div",{className:Object(U.a)("bp3-dark",we.a.main)},r.a.createElement("div",{className:we.a.emptyFiller}),r.a.createElement(V.b,{onSubmit:this.handleSubmit,initialValues:{tokens:i.join("\n"),serverHost:o,serverPort:c,connectionMode:s},render:function(e){var a=e.handleSubmit;return r.a.createElement("form",{onSubmit:a,className:Object(U.a)("bp3-card",we.a.form)},r.a.createElement("div",{className:we.a.title},"Blynk Web-Client"),r.a.createElement(z.a,{label:"Project's authentication tokens",labelFor:"tokens-input",helperText:"Paste here all auth tokens of your project"},r.a.createElement(V.a,{name:"tokens",id:"tokens-input",component:Se,validate:je,className:we.a.tokensInput})),r.a.createElement(z.a,{label:"Connection mode",labelFor:"connectionMode-input"},r.a.createElement(V.a,{name:"connectionMode",id:"connectionMode-input",component:Me,fill:!0,options:[{label:"No SSL",value:"no-ssl"},{label:"SSL",value:"ssl"}]})),r.a.createElement(z.a,{label:"Server Host",labelFor:"serverHost-input"},r.a.createElement(V.a,{name:"serverHost",id:"serverHost-input",component:xe,validate:je})),r.a.createElement(z.a,{label:"Server Port",labelFor:"serverPort-input"},r.a.createElement(V.a,{name:"serverPort",id:"serverPort-input",component:xe,validate:je})),r.a.createElement(K.a,{type:"submit",disabled:t,icon:"log-in",fill:!0,className:we.a.submitButton,intent:J.a.PRIMARY},t?"Connecting...":"Connect"),n&&r.a.createElement("div",{className:we.a.connectionProblem},"Connection to server problem (",n,")"))}}),r.a.createElement(Ie,null))}}]),t}(r.a.Component);var Ne=Object(L.b)(function(e,t){return{tokens:e.blynk.get("tokens"),serverHost:e.blynk.get("serverHost"),serverPort:e.blynk.get("serverPort"),connectionMode:e.blynk.get("connectionMode")}},{setConnectionParams:function(e){var t=e.tokens,n=e.serverHost,a=e.serverPort,r=e.connectionMode;return localStorage.setItem("blynk-web-client:tokens",t.join(",")),localStorage.setItem("blynk-web-client:serverHost",n),localStorage.setItem("blynk-web-client:serverPort",a),localStorage.setItem("blynk-web-client:connectionMode",r),{type:g,tokens:t,serverHost:n,serverPort:a,connectionMode:r}},testConnection:function(){return function(){var e=Object(B.a)(H.a.mark(function e(t,n){var a,r,i,o,c;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().blynk.toObject(),r=a.tokens,i=a.serverHost,o=a.serverPort,c=a.connectionMode,e.next=3,$.a.get("".concat(he({token:r.first(),serverHost:i,serverPort:o,connectionMode:c}),"/isAppConnected")).set("accept","json");case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}})(Te),Le=n(26),Ae=n(51),Pe=n.n(Ae),Re=n(18),De=n(76),He=n.n(De),Be=n(46),We=n.n(Be),Fe=function(e){return""===e||void 0===e},Ve=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.information,a=e.emptyHide;return Fe(t)&&Fe(n)&&a?r.a.createElement("div",null):r.a.createElement("div",{className:We.a.root},r.a.createElement("div",{className:We.a.title},t),r.a.createElement("div",{className:We.a.information},n))}}]),t}(r.a.Component);Ve.defaultProps={emptyHide:!0};var Ue=n(45),Ye=n.n(Ue),Ge=n(105),Xe=function(e,t,n){var a=e.blynk.getIn(["devices",t,"pins",n]);return a&&!isNaN(a)&&(a=parseFloat(Number(a).toFixed(2))),a},ze=n.n(Ge)()(function(e,t){return t},function(e){return e.blynk.getIn(["devices"])},function(e,t){var n=[];return e.get("dataStreams",new u.a).forEach(function(e){var a=e.get("targetId"),r=e.getIn(["pin","pinId"]);n.push(t.getIn([a,"pinsHistory",r]))}),n})(function(e,t){return t.get("id")});function Ke(e){switch(e){case 600084223:return"#23C48E";case 1602017535:return"#5F7CD8";case 79755519:return"#04C0F8";case-308477697:return"#ED9D00";case-750560001:return"#D3435C";case-1:return"#FFFFFF";case 255:return"#293742"}return"#999"}var Je=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={pressed:!1},n.handleMouseDown=function(){var e=n.props,t=e.widget,a=e.value;n.setState({pressed:!0});var r=fe(t);-1!==r&&(t.get("pushMode")?pe(t.get("deviceId")).sendWritePin(r,t.get("max")):String(a)===String(t.get("max"))?pe(t.get("deviceId")).sendWritePin(r,t.get("min")):pe(t.get("deviceId")).sendWritePin(r,t.get("max")))},n.handleMouseUp=function(){var e=n.props.widget;n.setState({pressed:!1});var t=fe(e);-1!==t&&e.get("pushMode")&&pe(e.get("deviceId")).sendWritePin(t,e.get("min"))},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"renderButtonLabel",value:function(){var e=this.props.widget;return this.isButtonActive()?e.get("onLabel","ON"):e.get("offLabel","OFF")}},{key:"getButtonStyle",value:function(e){var t=e.width,n=e.height,a=e.isStyledButton,r=this.props.widget,i=this.isButtonActive();if(a){var o;switch(r.get("edge")){case"SHARP":o=0;break;case"ROUNDED":o=3;break;case"PILL":o=n/2}return{width:t,height:n,borderRadius:o,backgroundColor:Ke(i?r.getIn(["onButtonState","backgroundColor"]):r.getIn(["offButtonState","backgroundColor"])),color:Ke(i?r.getIn(["onButtonState","textColor"]):r.getIn(["offButtonState","textColor"]))}}return{margin:2,width:Math.min(t,n)*r.get("width")/2-4,height:Math.min(t,n)-4,border:"2px solid ".concat(Ke(r.get("color"))),color:this.isButtonActive()?Ke(-1!==r.get("color")?-1:255):Ke(r.get("color")),backgroundColor:this.isButtonActive()?Ke(r.get("color")):Ke(255)}}},{key:"isButtonActive",value:function(){var e=this.state.pressed,t=this.props,n=t.widget,a=t.value;return String(a)===String(n.get("max"))||e}},{key:"render",value:function(){var e=this,t=this.props.widget,n="STYLED_BUTTON"===t.get("type");return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:t.get("label")||(n?"":"Button")}),r.a.createElement("div",{className:Ye.a.buttonContainer},r.a.createElement(Le.a,{className:Ye.a.sizeContainer},function(t){var a,i=t.width,o=t.height;return r.a.createElement(K.a,{className:Object(U.a)((a={},Object(Re.a)(a,Ye.a.button,!n),Object(Re.a)(a,Ye.a.styledButton,n),a)),active:e.isButtonActive(),onMouseDown:e.handleMouseDown,onMouseUp:e.handleMouseUp,style:e.getButtonStyle({width:i,height:o,isStyledButton:n})},e.renderButtonLabel())})))}}]),t}(r.a.Component);var qe=Object(L.b)(function(e,t){var n=t.widget.get("pinId"),a=t.widget.get("deviceId");return{value:Xe(e,a,n)}},{})(Je),Ze=n(234),Qe=n(106),$e=n.n(Qe),et=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){var t=n.props.widget,a=fe(t),r=t.get("sendOnReleaseOn");pe(t.get("deviceId")).sendWritePin(a,e,r)},n.handleRelease=function(e){var t=n.props.widget;if(t.get("sendOnReleaseOn")){var a=fe(t);pe(t.get("deviceId")).sendWritePin(a,e)}},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=e.value,a=e.vertical,i=Math.max(Math.min(Number(n),t.get("max")),t.get("min"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:t.get("label")||!a&&"Slider",information:n}),r.a.createElement("div",{className:$e.a.sliderContainer},r.a.createElement(Ze.a,{value:i,labelRenderer:!1,min:t.get("min"),max:t.get("max"),onChange:this.handleChange,onRelease:this.handleRelease,vertical:a})))}}]),t}(r.a.Component);var tt=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.get("pinId");return{value:Xe(e,n,a)}},{})(et),nt=n(107),at=n.n(nt),rt=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"renderValue",value:function(){var e=this.props,t=e.value,n=e.widget;return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:ye(t,n.get("valueFormatting"))}})}},{key:"render",value:function(){var e,t,n=this.props.widget;return"LARGE"===n.get("fontSize")?e="20px":"SMALL"===n.get("fontSize")&&(e="14px"),"MIDDLE"===n.get("textAlignment")?t="center":"RIGHT"===n.get("textAlignment")&&(t="right"),r.a.createElement("div",null,r.a.createElement("div",{className:"label"},n.get("label")),r.a.createElement("div",{className:at.a.value,style:{textAlign:t,color:Ke(n.get("color")),fontSize:e}},this.renderValue()))}}]),t}(r.a.Component);var it=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.get("pinId");return{value:Xe(e,n,a)}},{})(rt),ot=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props.widget;return r.a.createElement("div",null,r.a.createElement("b",null,"UNKNOWN!")," ",e.get("type"))}}]),t}(r.a.Component),ct=n(50),st=n(58),lt=n.n(st),ut=n(60),dt=n.n(ut),pt=n(37),ht=n.n(pt),gt=n(233),vt=n(108),mt=n.n(vt),bt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleSelectDuration=function(e){(0,n.props.onChangeDuration)(Number(e.currentTarget.dataset.duration))},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:mt.a.control},r.a.createElement(gt.a,{style:{minWidth:150},fill:!0},[["1h",36e5],["6h",216e5],["12h",432e5],["1d",864e5],["3d",2592e5]].map(function(t){var n=Object(re.a)(t,2),a=n[0],i=n[1];return r.a.createElement(K.a,{key:a,onClick:e.handleSelectDuration,"data-duration":i,small:!0},a)})))}}]),t}(r.a.Component),ft=n(65),yt=n.n(ft),_t=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataStreams,n=e.colorScale;return r.a.createElement("div",{className:yt.a.legend},t.map(function(e,t){return r.a.createElement("div",{key:t,className:yt.a.legendItem},r.a.createElement("div",{className:yt.a.legendCell,style:{backgroundColor:n(t)}}),e.get("title"))}))}}]),t}(r.a.Component),Ot=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).originalChartDuration=216e5,n.chartDuration=n.originalChartDuration,n.lastChartTime=0,n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"drawChart",value:function(){var e=this,t=this.props,n=t.width,a=t.dataStreamsHistory,i=t.height,c=t.controlBlockRef,s=t.legendBlockRef,l=t.showXAxis,d=this.props.dataStreams||new u.a,p=l?30:23,h=ne.n(this.containerRef).append("svg").attr("width",n).attr("height",i).attr("class",ht.a.svg),g=h.append("g").attr("transform","translate(0,".concat(3-p,")")),v=[];d.forEach(function(e){v.push(Ke(e.get("color")))});var m=ne.l(v),b=-1*Number.MAX_SAFE_INTEGER,f=Number.MAX_SAFE_INTEGER;a.forEach(function(e){var t=ne.h(e,function(e){return e[0]});f=Math.min(t[0],f),b=Math.max(t[1],b)}),this.lastChartTime=b;var y,_,O,w=ne.o("%Y-%m-%d %H:%M:%S"),j=!1,k=function(t){y=ne.k().domain([e.lastChartTime-e.chartDuration,e.lastChartTime]).range([0,n]),O=ne.m().domain([new Date(e.lastChartTime-e.chartDuration),new Date(e.lastChartTime)]).range([0,n]),_={},a.forEach(function(e,t){_[t]=ne.k().domain(ne.h(e,function(e){return e[1]})).range([i-3,3+p])}),a.forEach(function(e,n){var a=_[n],r=ne.i().x(function(e){var t=Object(re.a)(e,1)[0];return y(t)}).y(function(e){var t=Object(re.a)(e,2),n=(t[0],t[1]);return a(n)});(t?g.append("path").attr("class",Object(U.a)(ht.a.chartLine,"path".concat(n))):g.select(".path".concat(n))).datum(e).attr("d",r).attr("stroke",m(n))});var r=0;(a.forEach(function(e,n){if(d.getIn([n,"showYAxis"])){var a=_[n],i=ne.c(a);(t?g.append("g").attr("class",Object(U.a)(ht.a.leftAxis,"leftAxis".concat(n))).attr("transform","translate(".concat(30+30*r,", 0)")):g.select(".leftAxis".concat(n))).call(i).call(function(e){return e.select(".domain").remove()}).call(function(e){return e.selectAll("line").remove()}).call(function(e){return e.selectAll("text").attr("fill",dt()(m(n)).brighten(.8).css())}),r+=1}}),l)&&(t?g.append("g").attr("class","timeAxis").attr("transform","translate(0, ".concat(i+3,")")):g.select(".timeAxis")).call(ne.b(O))};k(!0);var E,I=ne.p().on("zoom",function(){e.chartDuration=e.originalChartDuration*(1/ne.g.transform.k),g.select(".tipGroup").transition().style("opacity","0"),k()}),C=ne.f().clickDistance(10).on("start",function(){j=!0,E=ne.g.x,g.select(".tipGroup").transition().style("opacity","0")}).on("end",function(){j=!1,g.select(".tipGroup").transition().style("opacity","1")}).on("drag",function(){var t=ne.g.x-E;if(t<-10||t>10){E=ne.g.x;var a=e.chartDuration/n*t;e.lastChartTime-=a,e.lastChartTime=Math.min(b+e.chartDuration/5,e.lastChartTime),e.lastChartTime=Math.max(f+e.chartDuration/2,e.lastChartTime),k()}});h.call(C).call(I).call(function(e){var t=g.append("g").attr("class","tipGroup").style("opacity","0");t.append("path").attr("class",Object(U.a)("tipMouseLine",ht.a.tipMouseLine));var n=t.append("g").attr("class",Object(U.a)("tipTime",ht.a.tipTime));n.append("rect").attr("class",Object(U.a)("tipTimeRect",ht.a.tipTimeRect)).attr("x",0).attr("y",0).attr("width",125).attr("height",15),n.append("text").attr("class","tipTimeText").attr("text-anchor","middle").attr("transform","translate(".concat(62.5,",12)")),d.forEach(function(e,n){var a=t.append("g").attr("class","dataStreamTip");a.append("circle").attr("class",Object(U.a)("tipCircle",ht.a.tipCircle)).attr("r",4).style("stroke",m(n)),a.append("text").attr("class",Object(U.a)("tipText",ht.a.tipText))});return e.on("mouseover",function(){j||t.style("opacity","1")}).on("mouseout",function(){t.style("opacity","0")}).on("mousemove",function(n,r,o){var c=ne.j(e.node()),s=y.invert(c[0]);t.select(".tipMouseLine").attr("d",function(){return ne.i()([[c[0],i+3],[c[0],0]])}),h.select(".tipTime").attr("transform","translate(".concat(c[0]-62.5,",").concat(i+3,")")),h.select(".tipTimeText").text(w(s)),t.selectAll(".dataStreamTip").each(function(e,t,n){var r=(0,ne.d(function(e){return Object(re.a)(e,1)[0]}).right)(a[t],s),i=_[t];if(a[t][r]){var o=i(a[t][r][1]);ne.n(n[t]).attr("transform","translate(".concat(c[0],",").concat(o,")"));var l=parseFloat(Number(a[t][r][1]).toFixed(1));ne.n(n[t]).select("text").text(l)}else ne.n(n[t]).attr("transform","translate(-999,-999)")})})});var x=function(t){e.originalChartDuration=t,e.chartDuration=t,h.call(I.transform,ne.q),k()};c&&o.a.render(r.a.createElement(bt,{onChangeDuration:x}),c),s&&o.a.render(r.a.createElement(_t,{onChangeDuration:x,colorScale:m,dataStreams:d}),s)}},{key:"componentDidMount",value:function(){var e=Object(B.a)(H.a.mark(function e(){return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.drawChart();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height;return r.a.createElement("div",{className:ht.a.chartContainer,style:{width:n,height:a},ref:function(t){e.containerRef=t}})}}]),t}(r.a.Component),wt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={historyIsReady:!1},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"getHistory",value:function(){var e=Object(B.a)(H.a.mark(function e(){var t,n,a,r,i,o,c,s,l,d;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.widget,a=t.getPinHistory,r=!0,i=!1,o=void 0,e.prev=4,c=n.get("dataStreams",new u.a)[Symbol.iterator]();case 6:if(r=(s=c.next()).done){e.next=14;break}return l=s.value,d=l.getIn(["pin","pinId"]),e.next=11,a({deviceId:l.get("targetId"),pin:d});case 11:r=!0,e.next=6;break;case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),i=!0,o=e.t0;case 20:e.prev=20,e.prev=21,r||null==c.return||c.return();case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(20);case 28:this.setState({historyIsReady:!0});case 29:case"end":return e.stop()}},e,this,[[4,16,20,28],[21,,23,27]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getHistory()}},{key:"renderChart",value:function(){var e=this,t=this.props,n=t.widget,a=t.dataStreamsHistory,i=n.get("xAxisValues");return r.a.createElement("div",{className:lt.a.chart},r.a.createElement(Le.a,null,function(t){var o=t.width,c=t.height;return!!c&&r.a.createElement(Ot,{dataStreams:n.get("dataStreams"),dataStreamsHistory:a,controlBlockRef:e.controlBlockRef,legendBlockRef:e.legendBlockRef,showXAxis:i,width:o,height:c})}))}},{key:"renderLoading",value:function(){return r.a.createElement("div",{className:lt.a.loading},r.a.createElement(ct.a,null))}},{key:"render",value:function(){var e=this,t=this.state.historyIsReady,n=this.props.widget;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:r.a.createElement("div",{className:lt.a.widgetLabelContainer},r.a.createElement("span",{className:lt.a.widgetLabel},n.get("label")),r.a.createElement("div",{ref:function(t){e.legendBlockRef=t}})),information:r.a.createElement("div",{ref:function(t){e.controlBlockRef=t}}),emptyHide:!1}),t?this.renderChart():this.renderLoading())}}]),t}(r.a.Component);var jt=Object(L.b)(function(e,t){return{dataStreamsHistory:ze(e,t.widget)}},{getPinHistory:function(e){var t=e.deviceId,n=e.pin;return function(){var e=Object(B.a)(H.a.mark(function e(a,r){var i,o,c,s,l,u,d;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r().blynk.toObject(),o=i.serverHost,c=i.serverPort,s=i.connectionMode,l=r().blynk.getIn(["devices",t,"token"]),e.prev=2,e.next=5,$.a.get("".concat(he({token:l,serverHost:o,serverPort:c,connectionMode:s}),"/data/").concat(n.toUpperCase())).responseType("blob");case 5:return u=e.sent,d=function(e){return new Promise(function(r,i){var o=new FileReader;o.onload=function(){var e=te.a.ungzip(o.result,{to:"string"}),i=ne.e(e).map(function(e){return[Number(e[1]),Number(e[0])]});a({type:b,deviceId:t,pin:n,history:i}),r()},o.readAsArrayBuffer(e)})},e.next=9,d(u.body);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),a({type:b,deviceId:t,pin:n,history:[]});case 14:case"end":return e.stop()}},e,this,[[2,11]])}));return function(t,n){return e.apply(this,arguments)}}()}})(wt),kt=n(109),Et=n.n(kt),It=n(110),Ct=n.n(It),xt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleChangeColor=function(e){var t=n.props.widget,a=t.getIn(["pins",0,"pinId"]),r=t.getIn(["pins",1,"pinId"]),i=t.getIn(["pins",2,"pinId"]);-1!==a&&pe(t.get("deviceId")).sendWritePin(a,e.rgb.r),-1!==r&&pe(t.get("deviceId")).sendWritePin(r,e.rgb.g),-1!==i&&pe(t.get("deviceId")).sendWritePin(i,e.rgb.b)},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=e.pin1Value,a=e.pin2Value,i=e.pin3Value,o=dt()([n,a,i]).hex();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:t.get("label")||"Zergba"}),r.a.createElement("div",{className:Ct.a.colorPickerContainer},r.a.createElement(Et.a,{opacity:!1,color:o,onChange:this.handleChangeColor})))}}]),t}(r.a.Component);var St=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.getIn(["pins",0,"pinId"]),r=t.widget.getIn(["pins",1,"pinId"]),i=t.widget.getIn(["pins",2,"pinId"]);return{pin1Value:Xe(e,n,a),pin2Value:Xe(e,n,r),pin3Value:Xe(e,n,i)}},{})(xt),Mt=n(111),Tt=n(59),Nt=n.n(Tt),Lt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleStartDrag=function(){},n.handleDrag=function(e,t){var a=t.deltaX,r=t.deltaY,i=n.props,o=i.widget,c=i.pin1Value,s=i.pin2Value,l=(-n.getMiddleX()+Number(c))/n.getMiddleX()*n.margin+a,u=(-n.getMiddleY()+Number(s))/n.getMiddleY()*n.margin*-1+r;l=Math.max(Math.min(l,n.margin),-n.margin),u=Math.max(Math.min(u,n.margin),-n.margin);var d=Math.sqrt(l*l+u*u);d>n.margin&&(l*=n.margin/d,u*=n.margin/d);var p=o.getIn(["pins",0,"pinId"]),h=o.getIn(["pins",1,"pinId"]);-1!==p&&pe(o.get("deviceId")).sendWritePin(p,Math.floor(n.getMiddleX()+l/n.margin*n.getMiddleX())),-1!==h&&pe(o.get("deviceId")).sendWritePin(h,Math.floor(n.getMiddleY()-u/n.margin*n.getMiddleY()))},n.handleStop=function(){var e=n.props.widget,t=e.getIn(["pins",0,"pinId"]),a=e.getIn(["pins",1,"pinId"]);-1!==t&&pe(e.get("deviceId")).sendWritePin(t,n.getMiddleX()),-1!==a&&pe(e.get("deviceId")).sendWritePin(a,n.getMiddleY())},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"getMiddleValue",value:function(e){var t=this.props.widget;return(t.getIn(["pins",e,"max"])-t.getIn(["pins",e,"min"])+1)/2}},{key:"getMiddleX",value:function(){return this._middleX=void 0!==this._middleX?this._middleX:this.getMiddleValue(0),this._middleX}},{key:"getMiddleY",value:function(){return this._middleY=void 0!==this._middleY?this._middleY:this.getMiddleValue(1),this._middleY}},{key:"render",value:function(){var e=this,t=this.props,n=t.widget,a=t.pin1Value,i=t.pin2Value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:n.get("label")||"Joystick",information:r.a.createElement("div",null,a,r.a.createElement("br",null),i)}),r.a.createElement("div",{className:Nt.a.mainContainer},r.a.createElement(Le.a,{className:Nt.a.sizeContainer},function(t){var o=t.width,c=t.height,s=Math.min(o,c)-40,l=s/2,u=l/2;e.margin=u;var d=(-e.getMiddleX()+Number(a))/e.getMiddleX()*e.margin,p=(-e.getMiddleY()+Number(i))/e.getMiddleY()*e.margin*-1;return r.a.createElement("div",{className:Nt.a.stickContainer,style:{width:s,height:s,margin:20}},r.a.createElement(Mt.DraggableCore,{onStart:e.handleStartDrag,onDrag:e.handleDrag,onStop:e.handleStop},r.a.createElement(K.a,{className:Nt.a.stick,style:{width:l+40,height:l+40,left:u-20,top:u-20,transform:"translate(".concat(d,"px, ").concat(p,"px)"),backgroundColor:Ke(n.get("color")),border:"5px solid white"}})))})))}}]),t}(r.a.Component);var At=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.getIn(["pins",0,"pinId"]),r=t.widget.getIn(["pins",1,"pinId"]);return{pin1Value:Xe(e,n,a),pin2Value:Xe(e,n,r)}},{})(Lt),Pt=n(77),Rt=n.n(Pt),Dt=n(112),Ht=n(113),Bt=n.n(Ht),Wt=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(i)))).renderThumb=function(e){var t=e.className,n=e.style,a=Object(F.a)(e,["className","style"]);return r.a.createElement("div",Object.assign({className:Object(U.a)(t,Bt.a.thumb),style:n},a))},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.scrollRef,n=Object(F.a)(e,["scrollRef"]);return r.a.createElement(Dt.Scrollbars,Object.assign({renderThumbHorizontal:this.renderThumb,renderThumbVertical:this.renderThumb,ref:function(e){return t(e)}},n))}}]),t}(a.Component);Wt.defaultProps={scrollRef:function(){}};var Ft=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:""},n.lastOwnChange=!1,n.handleSendInput=function(){var e=n.props.widget,t=n.state.inputValue,a=fe(e);-1!==a&&(n.lastOwnChange=!0,pe(e.get("deviceId")).sendWritePin(a,t)),n.setState({inputValue:""})},n.handleChangeInput=function(e){var t=e.currentTarget.value;n.setState({inputValue:t})},n.handleKeyPress=function(e){if(13===(e.keyCode?e.keyCode:e.which))return n.handleSendInput(),!1},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){e.pinWriteHistory!==this.props.pinWriteHistory&&this.props.widget.get("autoScrollOn")&&this.scrollComponent.scrollToBottom()}},{key:"generateHistoryOutput",value:function(){var e=this,t=this.props,n=t.pinWriteHistory,a=t.widget,r="";return n&&n.forEach(function(t,i){e.lastOwnChange&&i===n.size-1&&(r+="> ",e.lastOwnChange=!1),r+=t,a.get("attachNewLine")&&(r+="\r\n")}),r}},{key:"render",value:function(){var e=this,t=this.props.widget,n=this.state.inputValue,a=t.get("terminalInputOn");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Rt.a.outputContainer},r.a.createElement(Le.a,null,function(t){var n=t.width,a=t.height;return r.a.createElement(Wt,{style:{height:a,width:n},scrollRef:function(t){e.scrollComponent=t}},r.a.createElement("pre",{className:Object(U.a)("bp3-code-block",Rt.a.output)},e.generateHistoryOutput()))})),a&&r.a.createElement(Y.a,{placeholder:"Type here",value:n,onChange:this.handleChangeInput,onKeyPress:this.handleKeyPress,rightElement:r.a.createElement(K.a,{icon:"key-enter",minimal:!0,onClick:this.handleSendInput})}))}}]),t}(r.a.Component);var Vt=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.get("pinId");return{value:Xe(e,n,a),pinWriteHistory:e.blynk.getIn(["devices",n,"pinsWriteHistory",a])}},{})(Ft),Ut=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),t}(et);Ut.defaultProps={vertical:!0};var Yt=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.get("pinId");return{value:Xe(e,n,a)}},{})(Ut),Gt=n(66),Xt=n.n(Gt),zt=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"renderValue",value:function(e){var t=this.props,n=t.value1,a=t.value2,i=t.widget,o=1===e?n:a;return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:ye(o,i.get("textFormatLine".concat(e)),"pin".concat(e))}})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:Xt.a.value},r.a.createElement("div",{className:Xt.a.line},this.renderValue(1)),r.a.createElement("div",{className:Xt.a.line},this.renderValue(2))))}}]),t}(r.a.Component);var Kt=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.getIn(["pins",0,"pinId"]),r=t.widget.getIn(["pins",1,"pinId"]);return{value1:Xe(e,n,a),value2:Xe(e,n,r)}},{})(zt),Jt=n(114),qt=n.n(Jt),Zt=n(55),Qt=n.n(Zt),$t=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"renderChart",value:function(){var e=this,t=this.props,n=t.width,a=t.height,r=t.min,i=t.max,o=t.color,c=ne.n(this.containerRef).append("svg").attr("width",n).attr("height",a).append("g").attr("transform","translate(".concat(n/2,", ").concat(a/1.5,")")),s=Math.min(n,a)/1.5-10,l=ne.a().cornerRadius(10);c.append("path").attr("class",Object(U.a)("backLine",Qt.a.backLine)).attr("d",l({innerRadius:s-20,outerRadius:s,startAngle:-Math.PI/1.5,endAngle:Math.PI/1.5})),c.append("path").attr("class",Object(U.a)("frontLine",Qt.a.frontLine)).attr("fill",Ke(o)),c.append("foreignObject").attr("width",s).attr("height",50).attr("x",-s/2).attr("y",-25).append("xhtml:div").attr("class",Object(U.a)("value",Qt.a.value)).style("color",Ke(o)),c.append("text").attr("class",Object(U.a)("minLabel",Qt.a.minLabel)).attr("x",s*Math.sin(-Math.PI/1.5)+20).attr("y",s*Math.cos(-Math.PI/1.5)*-1-5).text(r),c.append("text").attr("class",Object(U.a)("maxLabel",Qt.a.maxLabel)).attr("x",s*Math.sin(Math.PI/1.5)-20).attr("y",s*Math.cos(Math.PI/1.5)*-1-5).text(i),this.redraw=function(){var t=e.props,n=t.min,a=t.max,r=t.value,i=t.valueFormatting,o=r/(a-n);c.select(".frontLine").attr("opacity",o?1:0).attr("d",l({innerRadius:s-20,outerRadius:s,startAngle:-Math.PI/1.5,endAngle:Math.PI/1.5-Math.PI*(1.33*(1-o))})),c.select(".value").html(ye(r,i))},this.redraw()}},{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(e,t,n){this.redraw&&this.redraw()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:function(t){e.containerRef=t}})}}]),t}(r.a.Component);var en=Object(L.b)(function(e,t){return{}},{})($t),tn=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=e.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:t.get("label")||"Gauge"}),r.a.createElement("div",{className:qt.a.chart},r.a.createElement(Le.a,null,function(e){var a=e.width,i=e.height;return!!i&&r.a.createElement(en,{width:a,height:i,min:t.get("min"),max:t.get("max"),value:Number(n)||0,valueFormatting:t.get("valueFormatting"),color:t.get("color")})})))}}]),t}(r.a.Component);var nn=Object(L.b)(function(e,t){var n=t.widget.get("pinId"),a=t.widget.get("deviceId");return{value:Xe(e,a,n)}},{})(tn),an=n(115),rn=n.n(an),on=n(78),cn=n.n(on),sn=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"renderChart",value:function(){var e=this,t=this.props,n=t.width,a=t.height,r=t.color,i=ne.n(this.containerRef).append("svg").attr("width",n).attr("height",a).append("g");i.append("rect").attr("class",Object(U.a)("backLine",cn.a.backLine)).attr("x",0).attr("y",0).attr("rx",3).attr("ry",3).attr("width",n).attr("height",a),i.append("rect").attr("class",Object(U.a)("frontLine",cn.a.frontLine)).attr("rx",3).attr("ry",3).attr("x",0).attr("y",0).attr("fill",Ke(r)),this.redraw=function(){var t=e.props,n=t.min,a=t.max,r=t.value,o=t.height,c=t.width,s=t.vertical,l=t.flipAxis,u=r/(a-n),d=i.select(".frontLine").attr("opacity",u?1:0);s?(d.attr("height",Math.max(u*o,0)).attr("width",c),l||d.attr("y",Math.max(o-u*o,0))):(d.attr("width",Math.max(u*c,0)).attr("height",o),l&&d.attr("x",Math.max(c-u*c,0)))},this.redraw()}},{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(e,t,n){this.redraw&&this.redraw()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{ref:function(t){e.containerRef=t}})}}]),t}(r.a.Component);var ln=Object(L.b)(function(e,t){return{}},{})(sn),un=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=e.value,a="VERTICAL_LEVEL_DISPLAY"===t.get("type");return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:t.get("label")||(a?"":"Level"),information:n}),r.a.createElement("div",{className:rn.a.chart},r.a.createElement(Le.a,null,function(e){var i=e.width,o=e.height;return!!o&&r.a.createElement(ln,{width:i,height:o,min:t.get("min"),max:t.get("max"),value:Number(n),valueFormatting:t.get("valueFormatting"),vertical:a,flipAxis:t.get("isAxisFlipOn"),color:t.get("color")})})))}}]),t}(r.a.Component);var dn=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.get("pinId");return{value:Xe(e,n,a)}},{})(un),pn=n(53),hn=n.n(pn),gn=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleMouseDown=function(e){var t=n.props.widget,a=t.get("step"),r=t.get("isSendStep"),i=t.get("isLoopOn"),o=t.get("max"),c=t.get("min"),s=fe(t),l=Number(e.currentTarget.dataset.direction);n.sendRepeatAction=Object(ce.a)({action:function(){var e,u=Number(n.props.value)||0;r?e=a*l:(e=u+a*l)>o?e=i?c:o:e<c&&(e=i?o:c),-1!==s&&pe(t.get("deviceId")).sendWritePin(s,e)},delay:80,firstTimeDelay:400,skipFirst:!1}),n.sendRepeatAction.start()},n.handleMouseUp=function(e){n.sendRepeatAction&&n.sendRepeatAction.stop()},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"getButtonLabel",value:function(e){return this.props.widget.get("isArrowsOn")?-1===e?"-":"+":-1===e?"\u2190":"\u2192"}},{key:"render",value:function(){var e,t,n=this.props,a=n.widget,i=n.value,o="VERTICAL_STEP"===a.get("type"),c=o?"Step V":"Step H";return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:a.get("label")||c,information:i}),r.a.createElement("div",{className:Object(U.a)((e={},Object(Re.a)(e,hn.a.verticalButtonsContainer,o),Object(Re.a)(e,hn.a.buttonsContainer,!o),e))},r.a.createElement(K.a,{minimal:!0,small:!0,className:hn.a.button,"data-direction":o?1:-1,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp},this.getButtonLabel(o?1:-1)),r.a.createElement("div",{className:Object(U.a)((t={},Object(Re.a)(t,hn.a.dividerHorizontal,o),Object(Re.a)(t,hn.a.dividerVertical,!o),t))}),r.a.createElement(K.a,{minimal:!0,small:!0,className:hn.a.button,"data-direction":o?-1:1,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp},this.getButtonLabel(o?-1:1))))}}]),t}(r.a.Component);var vn=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.get("pinId");return{value:Xe(e,n,a)}},{})(gn),mn=n(79),bn=n.n(mn),fn=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=e.value,a=Ke(t.get("color"));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve,{title:t.get("label")||"Led"}),r.a.createElement("div",{className:bn.a.ledContainer},r.a.createElement("svg",{width:24,height:24},r.a.createElement("circle",{r:10,cx:12,cy:12,className:bn.a.ledCircle,stroke:a,fill:a,fillOpacity:n/255}))))}}]),t}(r.a.Component);var yn=Object(L.b)(function(e,t){var n=t.widget.get("deviceId"),a=t.widget.get("pinId");return{value:Xe(e,n,a)||0}},{})(fn),_n=n(56),On=n.n(_n),wn=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleClickTab=function(e){(0,n.props.setActiveTabId)(Number(e.currentTarget.dataset.tabId))},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.widget,a=t.activeTabId;return r.a.createElement("div",{className:On.a.tabsContainer},r.a.createElement(Le.a,null,function(t){var i=t.width,o=t.height;return r.a.createElement(Wt,{style:{width:i,height:o}},r.a.createElement("div",{className:On.a.tabsInner},r.a.createElement("ul",{className:On.a.tabList},n.get("tabs").map(function(t,n){return r.a.createElement("li",{key:n,className:Object(U.a)(On.a.tab,Object(Re.a)({},On.a.activeTab,n===a)),onClick:e.handleClickTab,"data-tab-id":n},t.get("label")||"Tab ".concat(n+1))}))))}))}}]),t}(r.a.Component);var jn=Object(L.b)(function(e,t){return{activeTabId:e.blynk.get("activeTabId")}},{setActiveTabId:function(e){return{type:y,tabId:e}}})(wn),kn=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return null}}]),t}(r.a.Component),En={BUTTON:qe,STYLED_BUTTON:qe,SLIDER:tt,VERTICAL_SLIDER:Yt,RGB:St,TWO_AXIS_JOYSTICK:At,ENHANCED_GRAPH:jt,DIGIT4_DISPLAY:it,LABELED_VALUE_DISPLAY:it,GAUGE:nn,LCD:Kt,LEVEL_DISPLAY:dn,VERTICAL_LEVEL_DISPLAY:dn,TERMINAL:Vt,STEP:vn,VERTICAL_STEP:vn,LED:yn,TABS:jn,EMAIL:kn,NOTIFICATION:kn,TWITTER:kn,BRIDGE:kn},In=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"renderContent",value:function(){var e=this.props.widget,t=En[e.get("type")]||ot;return r.a.createElement(t,{widget:e})}},{key:"render",value:function(){var e=this.props.widget;return r.a.createElement("div",{className:Object(U.a)(He.a.root,Object(Re.a)({},He.a.tabsRoot,"TABS"===e.get("type"))),style:{left:60*e.get("x"),top:70*e.get("y"),width:60*e.get("width")-1,height:70*e.get("height")-1}},this.renderContent())}}]),t}(r.a.Component);var Cn=Object(L.b)(function(e,t){return{}},{})(In),xn=function(e){function t(){var e,n;Object(x.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(M.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){var e=n.props,t=e.history;(0,e.logout)(),t.push("/connection")},n}return Object(N.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){var e=Object(B.a)(H.a.mark(function e(){var t,n,a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.history,a=t.getProject,e.prev=1,e.next=4,a();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n.push("/connection");case 9:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"renderWidgets",value:function(){var e=this.props,t=e.project,n=e.activeTabId,a=[];return t.get("widgets").forEach(function(e){e.get("tabId")!==n&&"TABS"!==e.get("type")||a.push(r.a.createElement(Cn,{key:e.get("id"),widget:e}))}),a}},{key:"render",value:function(){var e=this,t=this.props.project;if(!t)return r.a.createElement("div",null);var n="Blynk"===t.get("theme")||!0;return r.a.createElement("div",{className:Object(U.a)(Pe.a.root,{"bp3-dark":n})},r.a.createElement("div",{className:Pe.a.header},r.a.createElement("div",{className:Pe.a.headerInner},r.a.createElement("div",{className:Pe.a.headerTitle},t.get("name")),r.a.createElement("div",null,r.a.createElement(K.a,{icon:"log-out",onClick:this.handleLogout})))),r.a.createElement("div",{className:Pe.a.workspace},r.a.createElement(Le.a,null,function(t){var n=t.width,a=t.height;return r.a.createElement(Wt,{style:{height:a,width:n}},r.a.createElement("div",{className:Pe.a.workspaceInner},r.a.createElement("div",{className:Pe.a.widgetsArea},e.renderWidgets())))})))}}]),t}(r.a.Component);var Sn=Object(L.b)(function(e,t){return{activeTabId:e.blynk.get("activeTabId"),project:e.blynk.get("project")}},{logout:function(){return function(e,t){localStorage.setItem("blynk-web-client:tokens",""),t().blynk.get("devices").forEach(function(e){pe(e.get("id")).stop()}),e({type:f})}},getProject:function(){return function(){var e=Object(B.a)(H.a.mark(function e(t,n){var a,r,i,o,c,s,l,d,p,h;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().blynk.toObject(),r=a.tokens,i=a.serverHost,o=a.serverPort,c=a.connectionMode,e.next=3,$.a.get("".concat(he({token:r.first(),serverHost:i,serverPort:o,connectionMode:c}),"/project")).set("accept","json");case 3:s=e.sent,l=s.body,l=u.c(l),d=ae(d=(d=l.get("devices")).map(function(e,t){return e.set("token",r.get(t)).set("pins",new u.b).set("pinsHistory",new u.b).set("pinsWriteHistory",new u.b)}),"id"),l=l.set("widgets",ae(l.get("widgets"),"id")),p=l.get("widgets"),h=function(e,t){var n=e.get("pin",-1),a=e.get("value");if(-1!==n){var r=fe(e);e=e.set("pinId",r),void 0!==a&&(d=d.setIn([t,"pins",r],a))}return e},p=p.map(function(e){var t=(e=h(e,e.get("deviceId"))).get("pins");t&&(t=t.map(function(t){return h(t,e.get("deviceId"))}),e=e.set("pins",t));var n=e.get("dataStreams");return n&&(n=n.map(function(t){return t.set("pin",h(t.get("pin"),e.get("deviceId")))}),e=e.set("dataStreams",n)),e}),l=l.set("widgets",p),d.forEach(function(e){var n=e.get("token"),a=e.get("id");pe(a).init({token:n,serverHost:i,serverPort:o,connectionMode:c}),pe(a).addEventListener("write-pin",function(e){var n=e.detail,r=n.pin,i=n.value;t(_e({deviceId:a,pin:r,value:i}))})}),t({type:v,project:l,devices:d});case 16:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}})(xn),Mn=function(e){function t(){return Object(x.a)(this,t),Object(M.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=this.props.store;return r.a.createElement(L.a,{store:e},r.a.createElement(A.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{exact:!0,path:"/",render:function(){return r.a.createElement(R.a,{to:"/project"})}}),r.a.createElement(P.a,{exact:!0,path:"/connection",component:Ne}),r.a.createElement(P.a,{exact:!0,path:"/project",component:Sn}))))}}]),t}(r.a.Component);n(222);c.a.onlyShowFocusOnTabs();var Tn=C(),Nn=document.querySelector("#root");o.a.render(r.a.createElement(Mn,{store:Tn}),Nn),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},37:function(e,t,n){e.exports={chartContainer:"styles_chartContainer__3DJ_6",svg:"styles_svg__1vC5p",chartLine:"styles_chartLine__1CifI",leftAxis:"styles_leftAxis__1kjRa",tipMouseLine:"styles_tipMouseLine__Na0tn",tipCircle:"styles_tipCircle__jjV2E",tipText:"styles_tipText__wU1vI",tipTime:"styles_tipTime__1dcaF",tipTimeRect:"styles_tipTimeRect__12TEN"}},38:function(e,t,n){e.exports={main:"styles_main__3scRY",emptyFiller:"styles_emptyFiller__2DgnJ",form:"styles_form__2Hy5B","form-appear":"styles_form-appear__25GrX",title:"styles_title__13IrG",error:"styles_error__pdPhD",connectionProblem:"styles_connectionProblem__3lBrk",tokensInput:"styles_tokensInput__1XHW4"}},45:function(e,t,n){e.exports={button:"styles_button__19SDI",styledButton:"styles_styledButton__KJgRv",buttonContainer:"styles_buttonContainer__1GVHK",sizeContainer:"styles_sizeContainer__kRN0-"}},46:function(e,t,n){e.exports={root:"styles_root__2NhjS",title:"styles_title__1_T56",information:"styles_information__2hWOG"}},51:function(e,t,n){e.exports={root:"styles_root__gqiwA",workspace:"styles_workspace__37uq_",workspaceInner:"styles_workspaceInner__BWWnv",header:"styles_header__Bux46",headerInner:"styles_headerInner__AfvU2",headerTitle:"styles_headerTitle__3pbBo",widgetsArea:"styles_widgetsArea__1W9v4"}},53:function(e,t,n){e.exports={buttonsContainer:"styles_buttonsContainer__22lNr",verticalButtonsContainer:"styles_verticalButtonsContainer__3LUsw",dividerVertical:"styles_dividerVertical__2il0m",dividerHorizontal:"styles_dividerHorizontal__28Bgx",button:"styles_button__3Ha7_"}},55:function(e,t,n){e.exports={backLine:"styles_backLine__3SIN8",value:"styles_value__1CjlU",minMaxLabel:"styles_minMaxLabel__20qmx",minLabel:"styles_minLabel__1_Ev6",maxLabel:"styles_maxLabel__J4ocL"}},56:function(e,t,n){e.exports={tabsContainer:"styles_tabsContainer__3kLiq",tab:"styles_tab__2M3Wv",tabsInner:"styles_tabsInner__w2iKw",activeTab:"styles_activeTab__2Z3oI",tabList:"styles_tabList__3gTaz"}},58:function(e,t,n){e.exports={loading:"styles_loading__38qYN",chart:"styles_chart__2sh6N",widgetLabelContainer:"styles_widgetLabelContainer__319Rw",widgetLabel:"styles_widgetLabel__3n0kd"}},59:function(e,t,n){e.exports={stickContainer:"styles_stickContainer__eSqQx",sizeContainer:"styles_sizeContainer__wUCpz",mainContainer:"styles_mainContainer__14Tlp",stick:"styles_stick__1y1-B"}},65:function(e,t,n){e.exports={legend:"styles_legend__2hHxs",legendItem:"styles_legendItem__2iL-a",legendCell:"styles_legendCell__2C2mN"}},66:function(e,t,n){e.exports={value:"styles_value__wMD90",line:"styles_line__3UCuF"}},75:function(e,t,n){e.exports={main:"styles_main__3wnYp",octicon:"styles_octicon__BDyek"}},76:function(e,t,n){e.exports={root:"styles_root__19KCy",tabsRoot:"styles_tabsRoot__FO1Tf"}},77:function(e,t,n){e.exports={outputContainer:"styles_outputContainer__28JKI",output:"styles_output__2ix2I"}},78:function(e,t,n){e.exports={backLine:"styles_backLine__1xSXc"}},79:function(e,t,n){e.exports={ledContainer:"styles_ledContainer__1YeRe",ledCircle:"styles_ledCircle__1hB4Z"}}},[[122,2,1]]]);
//# sourceMappingURL=main.0f285382.chunk.js.map